(self.webpackChunkangular_newtab=self.webpackChunkangular_newtab||[]).push([[381],{17381:function(e,t,i){"use strict";i.r(t),i.d(t,{DialogsModule:function(){return je}});var n=i(55109),s=i(36278),o=i(67563),a=i(42304),c=i(33960),r=i(82932),d=i(28383),g=i(35899);function l(e,t){1&e&&(a.TgZ(0,"div",7),a.TgZ(1,"div"),a._UZ(2,"img",8),a.TgZ(3,"span",9),a.SDv(4,10),a.qZA(),a.qZA(),a._UZ(5,"div"),a.qZA())}function f(e,t){1&e&&(a.TgZ(0,"div",24),a.SDv(1,25),a.qZA())}const m=function(e,t){return{"u-online":e,"u-offline":t}},u=function(e){return["getWhenDate",e,!1]},p=function(e){return{not_read:e}};function h(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",15),a._UZ(2,"img",16),a.qZA(),a.TgZ(3,"div",17),a.TgZ(4,"div",9),a.TgZ(5,"div",18),a._UZ(6,"i",19),a._uU(7),a.qZA(),a.TgZ(8,"div",20),a._uU(9),a.ALo(10,"callbackPipe"),a.qZA(),a.qZA(),a.TgZ(11,"div",21),a.YNc(12,f,2,0,"div",22),a.TgZ(13,"div",23),a._uU(14),a.qZA(),a.qZA(),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(1),a.Q6J("matBadge",t.getCountNotRead(e)),a.xp6(1),a.Q6J("src",t.getUser(e,2).avatar[75],a.LSH)("srcset",t.getUser(e,2).avatar[150]+" 2x",a.LSH),a.xp6(4),a.Q6J("ngClass",a.WLB(12,m,t.getUser(e,2).online,!t.getUser(e,2).online)),a.xp6(1),a.hij(" ",t.getUser(e,2).name+" "+t.getUser(e,2).surname," "),a.xp6(2),a.hij(" ",a.xi3(10,9,e.messages.length,a.VKq(15,u,t.getLastMess(e).date))," "),a.xp6(3),a.Q6J("ngIf",t.getLastMess(e).user_id==t.commonService.user.id),a.xp6(1),a.Q6J("ngClass",a.VKq(17,p,t.getLastMess(e).user_id==t.commonService.user.id&&t.getLastMess(e).not_read)),a.xp6(1),a.hij(" ",t.getLastMess(e).message," ")}}function _(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",15),a._UZ(2,"img",26),a.qZA(),a.TgZ(3,"div",17),a.TgZ(4,"div",9),a.TgZ(5,"div"),a.ynx(6),a.SDv(7,27),a.BQk(),a._uU(8),a.qZA(),a.TgZ(9,"div",20),a._uU(10),a.ALo(11,"callbackPipe"),a.qZA(),a.qZA(),a.TgZ(12,"div",28),a.TgZ(13,"div"),a._uU(14),a.qZA(),a.qZA(),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(1),a.Q6J("matBadge",t.getCountNotRead(e)),a.xp6(7),a.hij(" ID ",e.data.contract.id,""),a.xp6(2),a.hij(" ",a.xi3(11,4,e.messages.length,a.VKq(7,u,t.getLastMess(e).date))," "),a.xp6(4),a.Oqu(e.data.contract.title)}}function v(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",15),a._UZ(2,"img",29),a.qZA(),a.TgZ(3,"div",17),a.TgZ(4,"div",9),a.TgZ(5,"div"),a.SDv(6,30),a.qZA(),a.TgZ(7,"div",20),a._uU(8),a.ALo(9,"callbackPipe"),a.qZA(),a.qZA(),a.TgZ(10,"div",21),a.TgZ(11,"div",31),a._uU(12),a.qZA(),a.qZA(),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(1),a.Q6J("matBadge",t.getCountNotRead(e)),a.xp6(7),a.hij(" ",a.xi3(9,3,e.messages.length,a.VKq(6,u,t.getLastMess(e).date))," "),a.xp6(4),a.Oqu(t.getLastMess(e).message)}}function x(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",15),a._UZ(2,"img",32),a.qZA(),a.TgZ(3,"div",17),a.TgZ(4,"div",9),a.TgZ(5,"div"),a.SDv(6,33),a.qZA(),a.TgZ(7,"div",20),a._uU(8),a.ALo(9,"callbackPipe"),a.qZA(),a.qZA(),a.TgZ(10,"div",21),a.TgZ(11,"div",31),a._uU(12),a.qZA(),a.qZA(),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(1),a.Q6J("matBadge",t.getCountNotRead(e)),a.xp6(7),a.hij(" ",a.xi3(9,3,e.messages.length,a.VKq(6,u,t.getLastMess(e).date))," "),a.xp6(4),a.Oqu(t.clearMessageFromHTML(t.getLastMess(e).message))}}function b(e,t){if(1&e&&(a.ynx(0),a._uU(1),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(1),a.hij(" ",t.checkScrollOnAndLoad(e.id)," ")}}const Z=function(e){return["/dialogs",e]};function A(e,t){if(1&e&&(a.TgZ(0,"a",13),a.YNc(1,h,15,19,"ng-container",14),a.YNc(2,_,15,9,"ng-container",14),a.YNc(3,v,13,8,"ng-container",14),a.YNc(4,x,13,8,"ng-container",14),a.YNc(5,b,2,1,"ng-container",14),a.qZA()),2&e){const e=t.$implicit,i=t.index,n=a.oxw(3);a.Q6J("ngClass",a.VKq(8,p,n.getLastMess(e).user_id!=n.commonService.user.id&&n.getLastMess(e).not_read))("routerLink",a.VKq(10,Z,e.id))("id","dialog_"+e.id),a.xp6(1),a.Q6J("ngIf",0==e.type),a.xp6(1),a.Q6J("ngIf",1==e.type),a.xp6(1),a.Q6J("ngIf",2==e.type),a.xp6(1),a.Q6J("ngIf",3==e.type),a.xp6(1),a.Q6J("ngIf",i==n.commonService.dialogs.length-1)}}function q(e,t){if(1&e&&(a.TgZ(0,"div",11),a.YNc(1,A,6,12,"a",12),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",e.commonService.dialogs)}}function T(e,t){if(1&e&&(a.TgZ(0,"div",4),a.YNc(1,l,6,0,"div",5),a.YNc(2,q,2,1,"div",6),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngIf",!e.commonService.dialogs.length),a.xp6(1),a.Q6J("ngIf",e.commonService.dialogs.length)}}function C(e,t){1&e&&(a.TgZ(0,"div",34),a._UZ(1,"mat-progress-spinner",35),a.qZA())}let M=(()=>{class e{constructor(e,t){this.commonService=e,this.cdr=t}ngOnInit(){this.getDialogs(),this.socket_reconnect_sub=this.commonService.socketService.socket_change_status.subscribe(e=>{"reconnect"==e&&this.getDialogs()})}ngOnDestroy(){this.socket_reconnect_sub&&this.socket_reconnect_sub.unsubscribe()}getDialogs(e=0){this.commonService.createRequest("get","dialogs",{offset:e}).toPromise().then(e=>{e.dialogs&&this.commonService.addToDialogs(e.dialogs),this.cdr.destroyed||this.cdr.detectChanges()})}getUser(e,t){return e.users.filter(e=>1==t?e.id==this.commonService.user.id:e.id!=this.commonService.user.id),e.users.filter(e=>1==t?e.id==this.commonService.user.id:e.id!=this.commonService.user.id)[0]}getLastMess(e){return e.messages[e.messages.length-1]}checkScrollOnAndLoad(e){let t=this;setTimeout(()=>{let i=document.getElementById("dialog_"+e);i&&(i.getAttribute("intersector")||(i.setAttribute("intersector","true"),t._setIntersectionObserver(i)))},50)}_setIntersectionObserver(e){if(e){if(!this.intersection_observer){let e=this;this.intersection_observer=new IntersectionObserver(function(t){!0===t[0].isIntersecting&&(e.intersection_observer.unobserve(t[0].target),e.loadMoreDialogs())},{threshold:[0]})}this.intersection_observer.disconnect(),this.intersection_observer.observe(e)}}loadMoreDialogs(){!this.commonService.dialogs||this.commonService.dialogs.length<20||this.getDialogs(this.commonService.dialogs.length)}getCountNotRead(e){let t=0;return e.messages.forEach(e=>{e.not_read&&e.user_id!=this.commonService.user.id&&t++}),t||""}clearMessageFromHTML(e){return e.replace(/<[^>]*>/g,"")}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.v),a.Y36(a.sBO))},e.\u0275cmp=a.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:2,consts:function(){let e,t,i,n,s,o;return e=" Conversations\n",t="No messages",i="You: ",n="Contract",s="Contacting support",o="Notifications",[[1,"h3"],e,["class","dialogs",4,"ngIf"],["class","page-loader",4,"ngIf"],[1,"dialogs"],["class","empty",4,"ngIf"],["style","width: 100%",4,"ngIf"],[1,"empty"],["src","https://maketime.online/img/undraw_chat.svg","alt",""],[1,"title"],t,[2,"width","100%"],["class","dialog div",3,"ngClass","routerLink","id",4,"ngFor","ngForOf"],[1,"dialog","div",3,"ngClass","routerLink","id"],[4,"ngIf"],["matBadgeColor","accent","matBadgePosition","above after",1,"avatar",3,"matBadge"],["alt","",3,"src","srcset"],[1,"body"],[1,"username"],[1,"far","fa-circle",3,"ngClass"],[1,"date"],[1,"message"],["class","our-mess",4,"ngIf"],[1,"mess-text",3,"ngClass"],[1,"our-mess"],i,["src","https://maketime.online/img/contract.svg","alt","",2,"padding","4px"],n,[1,"info"],["src","https://maketime.online/img/active_support.svg","alt",""],s,[1,"mess-text"],["src","https://maketime.online/img/info.svg","alt","",2,"width","60px"],o,[1,"page-loader"],["color","warn","mode","indeterminate"]]},template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.SDv(1,1),a.qZA(),a.YNc(2,T,3,2,"div",2),a.YNc(3,C,2,0,"div",3)),2&e&&(a.xp6(2),a.Q6J("ngIf",null!=t.commonService.dialogs),a.xp6(1),a.Q6J("ngIf",null==t.commonService.dialogs))},directives:[n.O5,n.sg,o.yS,n.mk,r.k,d.Ou],pipes:[g.A],styles:[".h3[_ngcontent-%COMP%]{justify-content:space-between;margin:1rem;width:100%;text-align:left}.dialog[_ngcontent-%COMP%], .h3[_ngcontent-%COMP%]{display:flex}.dialog[_ngcontent-%COMP%]{justify-content:flex-start;border-top:1px solid var(--hr-color);padding:1rem;cursor:pointer}.dialog[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.dialog[_ngcontent-%COMP%]:last-child{border-bottom:1px solid var(--hr-color)}.avatar[_ngcontent-%COMP%]{margin-right:1rem;min-width:75px}.avatar[_ngcontent-%COMP%], .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px;border-radius:15px}.body[_ngcontent-%COMP%]{width:100%;min-width:0}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.title[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:1.1rem;display:flex;align-items:center}.title[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:rgba(0,0,0,.54);font-size:.8rem}.title[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{font-weight:500}.message[_ngcontent-%COMP%]{text-align:left;font-size:.9rem;margin-top:.5rem;display:flex;align-items:center}.message[_ngcontent-%COMP%]   .our-mess[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.message[_ngcontent-%COMP%]   .not_read[_ngcontent-%COMP%]{background-color:#74b9ff14;border-radius:5px;flex-grow:1;padding:1px 1px 1px 5px}.message[_ngcontent-%COMP%]   .mess-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.dialogs[_ngcontent-%COMP%]{display:flex;flex-grow:1}.dialogs[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{display:flex;align-content:center;justify-content:center;flex-direction:column;width:100%;justify-content:space-around}.dialogs[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.dialogs[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.3rem;margin-top:1rem;color:#676767;display:inherit}.dialog.not_read[_ngcontent-%COMP%]{background-color:#74b9ff14}.body[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{text-align:left;font-size:.8rem;margin-top:.5rem}"]}),e})();var k=i(4391),y=i(40485),w=i(88269),P=i(94253),S=i(90095),O=i(82758),J=i(19014),Q=i(34543);const I=["scrollMe"],N=function(e,t){return{"u-online":e,"u-offline":t}};function U(e,t){if(1&e&&(a.TgZ(0,"div",13),a.TgZ(1,"span",14),a.SDv(2,15),a.qZA(),a.TgZ(3,"a",16),a._UZ(4,"i",17),a._uU(5),a.qZA(),a.qZA()),2&e){const e=a.oxw(3);a.xp6(3),a.Q6J("routerLink","/profile/"+e.getAnotherUser().id),a.xp6(1),a.Q6J("ngClass",a.WLB(3,N,e.getAnotherUser().online,!e.getAnotherUser().online)),a.xp6(1),a.hij(" ",e.getAnotherUser().name+" "+e.getAnotherUser().surname,"")}}function L(e,t){if(1&e&&(a.TgZ(0,"div",18),a.TgZ(1,"span",19),a.SDv(2,20),a.qZA(),a.TgZ(3,"a",16),a._uU(4),a.qZA(),a.qZA()),2&e){const e=a.oxw(3);a.xp6(3),a.Q6J("routerLink","/space/contract/"+e.dialog.data.contract.id),a.xp6(1),a.hij(" ",e.dialog.data.contract.title," ")}}function $(e,t){1&e&&(a.TgZ(0,"div",18),a.SDv(1,21),a.qZA())}function B(e,t){1&e&&(a.TgZ(0,"div",18),a.SDv(1,22),a.qZA())}function j(e,t){if(1&e&&(a.ynx(0),a.YNc(1,U,6,6,"div",5),a.YNc(2,L,5,2,"div",12),a.YNc(3,$,2,0,"div",12),a.YNc(4,B,2,0,"div",12),a.BQk()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",0==e.dialog.type),a.xp6(1),a.Q6J("ngIf",1==e.dialog.type),a.xp6(1),a.Q6J("ngIf",2==e.dialog.type),a.xp6(1),a.Q6J("ngIf",3==e.dialog.type)}}function Y(e,t){if(1&e&&(a.TgZ(0,"div",13),a.TgZ(1,"span",14),a.SDv(2,23),a.qZA(),a.TgZ(3,"a",16),a._UZ(4,"i",17),a._uU(5),a.qZA(),a.qZA()),2&e){const e=a.oxw(2);a.xp6(3),a.Q6J("routerLink","/profile/"+e.user.id),a.xp6(1),a.Q6J("ngClass",a.WLB(3,N,e.user.online,!e.user.online)),a.xp6(1),a.hij(" ",e.user.name+" "+e.user.surname,"")}}const z=function(e,t){return["getAttach",e,"url",t]},D=function(e,t){return["getAttach",e,"name",t]};function H(e,t){if(1&e&&(a.TgZ(0,"div",34),a.TgZ(1,"a",35),a.ALo(2,"callbackPipe"),a._UZ(3,"i",36),a._uU(4),a.ALo(5,"callbackPipe"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Q6J("href",a.xi3(2,2,e,a.WLB(8,z,e.attach,e.user_id)),a.LSH),a.xp6(3),a.hij(" ",a.xi3(5,5,e,a.WLB(11,D,e.attach,e.user_id)),"")}}const E=function(e){return["getWhenDate",e,!1]},F=function(e){return["getHTMLText",e]};function R(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",26),a._UZ(2,"img",27),a.qZA(),a.TgZ(3,"div",28),a.TgZ(4,"div",29),a.TgZ(5,"div",30),a.TgZ(6,"a",16),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"div",31),a._uU(9),a.ALo(10,"callbackPipe"),a.qZA(),a.qZA(),a._UZ(11,"div",32),a.ALo(12,"callbackPipe"),a.YNc(13,H,6,14,"div",33),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(2),a.Q6J("src",t.getUserById(e.user_id).avatar[50],a.LSH)("srcset",t.getUserById(e.user_id).avatar[100]+" 2x",a.LSH),a.xp6(4),a.Q6J("routerLink","/profile/"+e.user_id),a.xp6(1),a.Oqu(t.getUserById(e.user_id).name+" "+t.getUserById(e.user_id).surname),a.xp6(2),a.hij(" ",a.xi3(10,7,e.date,a.VKq(13,E,e.date))," "),a.xp6(2),a.Q6J("innerHTML",a.xi3(12,10,e.message,a.VKq(15,F,e.message)),a.oJD),a.xp6(2),a.Q6J("ngIf",e.attach)}}function K(e,t){if(1&e&&(a.TgZ(0,"div",42),a.ynx(1),a.SDv(2,43),a.BQk(),a.TgZ(3,"a",16),a._uU(4),a.qZA(),a.ynx(5),a.SDv(6,44),a.BQk(),a.TgZ(7,"a",16),a._uU(8),a.qZA(),a.ynx(9),a.SDv(10,45),a.BQk(),a.TgZ(11,"a",16),a._uU(12),a.qZA(),a._uU(13,". "),a._UZ(14,"br"),a.ynx(15),a.tHW(16,46),a._UZ(17,"br"),a._UZ(18,"br"),a.N_p(),a.BQk(),a.qZA()),2&e){const e=a.oxw(2).$implicit,t=a.oxw(3);a.xp6(3),a.Q6J("routerLink","/space/contract/"+t.dialog.data.contract.id),a.xp6(1),a.hij(" ID ",t.dialog.data.contract.id," "),a.xp6(3),a.Q6J("routerLink","/profile/"+e.data.user_customer.id),a.xp6(1),a.hij(" ",e.data.user_customer.name," "),a.xp6(3),a.Q6J("routerLink","/profile/"+e.data.user_employee.id),a.xp6(1),a.hij(" ",e.data.user_employee.name,"")}}function W(e,t){1&e&&(a.TgZ(0,"div",42),a.SDv(1,47),a.qZA())}function V(e,t){1&e&&(a.TgZ(0,"div",42),a.SDv(1,48),a.qZA())}function G(e,t){1&e&&(a.TgZ(0,"div",42),a.SDv(1,49),a.qZA())}function X(e,t){1&e&&(a.TgZ(0,"div",42),a.SDv(1,50),a.qZA())}function ee(e,t){1&e&&(a.TgZ(0,"div"),a.tHW(1,53),a._UZ(2,"span",54),a.N_p(),a.qZA())}function te(e,t){1&e&&(a.TgZ(0,"div"),a.tHW(1,55),a._UZ(2,"span",54),a.N_p(),a.qZA())}const ie=function(e){return["getWhenDate",e,!0]};function ne(e,t){if(1&e&&(a.TgZ(0,"div"),a.ynx(1),a.SDv(2,56),a.BQk(),a._uU(3),a.ALo(4,"callbackPipe"),a.ynx(5),a.SDv(6,57),a.BQk(),a.qZA()),2&e){const e=a.oxw(3).$implicit;a.xp6(3),a.Oqu(a.xi3(4,1,e.data.unixtime_end,a.VKq(4,ie,e.data.unixtime_end)))}}function se(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",58),a.TgZ(1,"button",59),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(3).$implicit;return a.oxw(3).messageAction("contract-request",t,!0)}),a.SDv(2,60),a.qZA(),a.TgZ(3,"button",6),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(3).$implicit;return a.oxw(3).messageAction("contract-request",t,!1)}),a.SDv(4,61),a.qZA(),a.qZA()}}function oe(e,t){if(1&e&&(a.TgZ(0,"div",42),a.ynx(1),a.SDv(2,51),a.BQk(),a.YNc(3,ee,3,0,"div",4),a.YNc(4,te,3,0,"div",4),a.YNc(5,ne,7,6,"div",4),a.YNc(6,se,5,0,"div",52),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(3),a.Q6J("ngIf",2==e.data.status),a.xp6(1),a.Q6J("ngIf",1==e.data.status),a.xp6(1),a.Q6J("ngIf",0==e.data.status),a.xp6(1),a.Q6J("ngIf",0==e.data.status&&"employee"==e.data.my_role)}}function ae(e,t){1&e&&(a.TgZ(0,"div"),a.tHW(1,63),a._UZ(2,"span",54),a.N_p(),a.qZA())}function ce(e,t){1&e&&(a.TgZ(0,"div"),a.tHW(1,64),a._UZ(2,"span",54),a.N_p(),a.qZA())}function re(e,t){if(1&e&&(a.TgZ(0,"div"),a.ynx(1),a.SDv(2,65),a.BQk(),a._uU(3),a.ALo(4,"callbackPipe"),a.ynx(5),a.SDv(6,66),a.BQk(),a.qZA()),2&e){const e=a.oxw(3).$implicit;a.xp6(3),a.hij(" ",a.xi3(4,1,e.data.unixtime_end,a.VKq(4,ie,e.data.unixtime_end)),"")}}function de(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",58),a.TgZ(1,"button",59),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(3).$implicit;return a.oxw(3).messageAction("contract-request",t,!0)}),a.SDv(2,67),a.qZA(),a.TgZ(3,"button",6),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(3).$implicit;return a.oxw(3).messageAction("contract-request",t,!1)}),a.SDv(4,68),a.qZA(),a.qZA()}}function ge(e,t){if(1&e&&(a.TgZ(0,"div",42),a.ynx(1),a.SDv(2,62),a.BQk(),a.YNc(3,ae,3,0,"div",4),a.YNc(4,ce,3,0,"div",4),a.YNc(5,re,7,6,"div",4),a.YNc(6,de,5,0,"div",52),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(3),a.Q6J("ngIf",2==e.data.status),a.xp6(1),a.Q6J("ngIf",1==e.data.status),a.xp6(1),a.Q6J("ngIf",0==e.data.status),a.xp6(1),a.Q6J("ngIf",0==e.data.status&&"customer"==e.data.my_role)}}function le(e,t){1&e&&(a.TgZ(0,"div",42),a.SDv(1,69),a.qZA())}function fe(e,t){1&e&&(a.TgZ(0,"div",42),a.tHW(1,70),a._UZ(2,"br"),a._UZ(3,"br"),a._UZ(4,"br"),a._UZ(5,"br"),a._UZ(6,"br"),a.N_p(),a.qZA())}function me(e,t){if(1&e&&a._UZ(0,"div",71),2&e){const e=a.oxw(2).$implicit;a.Q6J("innerHTML",e.message,a.oJD)}}function ue(e,t){if(1&e&&(a.TgZ(0,"div",34),a.TgZ(1,"a",35),a.ALo(2,"callbackPipe"),a._UZ(3,"i",36),a._uU(4),a.ALo(5,"callbackPipe"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Q6J("href",a.xi3(2,2,e,a.WLB(8,z,e.attach,e.user_id)),a.LSH),a.xp6(3),a.hij(" ",a.xi3(5,5,e,a.WLB(11,D,e.attach,e.user_id)),"")}}function pe(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",26),a._UZ(2,"img",37),a.qZA(),a.TgZ(3,"div",38),a.TgZ(4,"div",29),a.TgZ(5,"div",30),a.SDv(6,39),a.qZA(),a.TgZ(7,"div",31),a._uU(8),a.ALo(9,"callbackPipe"),a.qZA(),a.qZA(),a.YNc(10,K,19,6,"div",40),a.YNc(11,W,2,0,"div",40),a.YNc(12,V,2,0,"div",40),a.YNc(13,G,2,0,"div",40),a.YNc(14,X,2,0,"div",40),a.YNc(15,oe,7,4,"div",40),a.YNc(16,ge,7,4,"div",40),a.YNc(17,le,2,0,"div",40),a.YNc(18,fe,7,0,"div",40),a.YNc(19,me,1,1,"div",41),a.YNc(20,ue,6,14,"div",33),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(8),a.hij(" ",a.xi3(9,12,e.date,a.VKq(15,E,e.date))," "),a.xp6(2),a.Q6J("ngIf",1==e.sub_type),a.xp6(1),a.Q6J("ngIf",2==e.sub_type),a.xp6(1),a.Q6J("ngIf",3==e.sub_type),a.xp6(1),a.Q6J("ngIf",4==e.sub_type),a.xp6(1),a.Q6J("ngIf",5==e.sub_type),a.xp6(1),a.Q6J("ngIf",6==e.sub_type),a.xp6(1),a.Q6J("ngIf",7==e.sub_type),a.xp6(1),a.Q6J("ngIf",8==e.sub_type),a.xp6(1),a.Q6J("ngIf",9==e.sub_type),a.xp6(1),a.Q6J("ngIf",10==e.sub_type),a.xp6(1),a.Q6J("ngIf",e.attach)}}function he(e,t){if(1&e&&(a.TgZ(0,"div",34),a.TgZ(1,"a",35),a.ALo(2,"callbackPipe"),a._UZ(3,"i",36),a._uU(4),a.ALo(5,"callbackPipe"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Q6J("href",a.xi3(2,2,e,a.WLB(8,z,e.attach,e.user_id)),a.LSH),a.xp6(3),a.hij(" ",a.xi3(5,5,e,a.WLB(11,D,e.attach,e.user_id)),"")}}function _e(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",26),a._UZ(2,"img",37),a.qZA(),a.TgZ(3,"div",38),a.TgZ(4,"div",29),a.TgZ(5,"div",30),a.SDv(6,72),a.qZA(),a.TgZ(7,"div",31),a._uU(8),a.ALo(9,"callbackPipe"),a.qZA(),a.qZA(),a._UZ(10,"div",32),a.ALo(11,"callbackPipe"),a.YNc(12,he,6,14,"div",33),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(8),a.hij(" ",a.xi3(9,3,e.date,a.VKq(9,E,e.date))," "),a.xp6(2),a.Q6J("innerHTML",a.xi3(11,6,e.message,a.VKq(11,F,e.message)),a.oJD),a.xp6(2),a.Q6J("ngIf",e.attach)}}function ve(e,t){if(1&e&&(a.TgZ(0,"div",34),a.TgZ(1,"a",35),a.ALo(2,"callbackPipe"),a._UZ(3,"i",36),a._uU(4),a.ALo(5,"callbackPipe"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.xp6(1),a.Q6J("href",a.xi3(2,2,e,a.WLB(8,z,e.attach,e.user_id)),a.LSH),a.xp6(3),a.hij(" ",a.xi3(5,5,e,a.WLB(11,D,e.attach,e.user_id)),"")}}function xe(e,t){if(1&e&&(a.ynx(0),a.TgZ(1,"div",26),a._UZ(2,"img",73),a.qZA(),a.TgZ(3,"div",38),a.TgZ(4,"div",29),a.TgZ(5,"div",30),a.SDv(6,74),a.qZA(),a.TgZ(7,"div",31),a._uU(8),a.ALo(9,"callbackPipe"),a.qZA(),a.qZA(),a._UZ(10,"div",32),a.ALo(11,"callbackPipe"),a.YNc(12,ve,6,14,"div",33),a.qZA(),a.BQk()),2&e){const e=a.oxw().$implicit;a.xp6(8),a.hij(" ",a.xi3(9,3,e.date,a.VKq(9,E,e.date))," "),a.xp6(2),a.Q6J("innerHTML",a.xi3(11,6,e.message,a.VKq(11,F,e.message)),a.oJD),a.xp6(2),a.Q6J("ngIf",e.attach)}}function be(e,t){if(1&e&&(a.ynx(0),a._uU(1),a.BQk()),2&e){const e=a.oxw().$implicit,t=a.oxw(3);a.xp6(1),a.hij(" ",t.checkScrollOnAndLoad(e.id)," ")}}const Ze=function(e){return{not_read:e}};function Ae(e,t){if(1&e&&(a.TgZ(0,"div",25),a.YNc(1,R,14,17,"ng-container",4),a.YNc(2,pe,21,17,"ng-container",4),a.YNc(3,_e,13,13,"ng-container",4),a.YNc(4,xe,13,13,"ng-container",4),a.YNc(5,be,2,1,"ng-container",4),a.qZA()),2&e){const e=t.$implicit,i=t.index;a.Q6J("id","message_"+e.id)("ngClass",a.VKq(7,Ze,e.not_read)),a.xp6(1),a.Q6J("ngIf",0==e.type),a.xp6(1),a.Q6J("ngIf",1==e.type),a.xp6(1),a.Q6J("ngIf",2==e.type),a.xp6(1),a.Q6J("ngIf",3==e.type),a.xp6(1),a.Q6J("ngIf",1==i)}}function qe(e,t){if(1&e&&(a.ynx(0),a.YNc(1,Ae,6,9,"div",24),a.BQk()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",e.dialog.messages)}}const Te=function(){return{position:"absolute",bottom:"90px",right:"20%",width:"338px","z-index":"1"}};function Ce(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"emoji-mart",91),a.NdJ("emojiClick",function(t){return a.CHM(e),a.oxw(3).addEmoji(t)}),a.qZA()}if(2&e){const e=a.oxw(3);a.Akn(a.DdM(6,Te)),a.Q6J("darkMode",!1)("i18n",e.emoji_l18n)("showPreview",!1)("isNative",!0)}}function Me(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"i",92),a.NdJ("click",function(){return a.CHM(e),a.oxw(3).createNewContract()}),a.qZA()}}function ke(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",93),a._uU(1),a.TgZ(2,"i",94),a.NdJ("click",function(){return a.CHM(e),a.oxw(3).file=null}),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(3);a.xp6(1),a.hij(" ",e.file.name," ")}}function ye(e,t){1&e&&(a.TgZ(0,"span"),a.SDv(1,95),a.qZA())}function we(e,t){1&e&&(a.TgZ(0,"div",96),a.TgZ(1,"div",97),a._UZ(2,"div"),a.qZA(),a.qZA())}function Pe(e,t){1&e&&(a.TgZ(0,"span"),a._UZ(1,"i",98),a.qZA())}function Se(e,t){1&e&&(a.TgZ(0,"div",96),a.TgZ(1,"div",97),a._UZ(2,"div"),a.qZA(),a.qZA())}const Oe=function(){return{standalone:!0}};function Je(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",75),a.TgZ(1,"div",76),a.YNc(2,Ce,1,7,"emoji-mart",77),a.TgZ(3,"form",78),a.NdJ("submit",function(){return a.CHM(e),a.oxw(2).sendMessage()}),a.TgZ(4,"mat-form-field"),a.TgZ(5,"textarea",79),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw(2).send_message=t}),a.qZA(),a.TgZ(6,"div",80),a.TgZ(7,"i",81),a.NdJ("click",function(){a.CHM(e);const t=a.oxw(2);return t.show_emoji=!t.show_emoji}),a.qZA(),a.TgZ(8,"i",82),a.NdJ("click",function(){a.CHM(e);const t=a.MAs(11),i=a.oxw(2);return t.click(),i.show_emoji=!1}),a.qZA(),a.YNc(9,Me,1,0,"i",83),a.qZA(),a.qZA(),a.TgZ(10,"input",84,85),a.NdJ("change",function(){return a.CHM(e),a.oxw(2).onFileSelected()}),a.qZA(),a.qZA(),a.YNc(12,ke,3,1,"div",86),a.qZA(),a.TgZ(13,"div",87),a.TgZ(14,"button",88),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).sendMessage()}),a.YNc(15,ye,2,0,"span",4),a.YNc(16,we,3,0,"div",89),a.qZA(),a.TgZ(17,"button",90),a.NdJ("click",function(){return a.CHM(e),a.oxw(2).sendMessage()}),a.YNc(18,Pe,2,0,"span",4),a.YNc(19,Se,3,0,"div",89),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=a.oxw(2);a.xp6(2),a.Q6J("ngIf",e.show_emoji),a.xp6(3),a.Q6J("ngModelOptions",a.DdM(11,Oe))("ngModel",e.send_message),a.xp6(4),a.Q6J("ngIf",e.dialog&&2!=e.dialog.type||e.user),a.xp6(3),a.Q6J("ngIf",e.file),a.xp6(2),a.Q6J("disabled",e.is_send_message),a.xp6(1),a.Q6J("ngIf",!e.is_send_message),a.xp6(1),a.Q6J("ngIf",e.is_send_message),a.xp6(1),a.Q6J("disabled",e.is_send_message),a.xp6(1),a.Q6J("ngIf",!e.is_send_message),a.xp6(1),a.Q6J("ngIf",e.is_send_message)}}const Qe=function(e){return{full:e}};function Ie(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",2),a.TgZ(1,"div",3),a.YNc(2,j,5,4,"ng-container",4),a.YNc(3,Y,6,6,"div",5),a.TgZ(4,"div"),a.TgZ(5,"button",6),a.NdJ("click",function(){return a.CHM(e),a.oxw().goBack()}),a.SDv(6,7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",8),a.TgZ(8,"div",9,10),a.YNc(10,qe,2,1,"ng-container",4),a.qZA(),a.YNc(11,Je,20,12,"div",11),a.qZA(),a.qZA()}if(2&e){const e=a.oxw();a.xp6(2),a.Q6J("ngIf",e.dialog),a.xp6(1),a.Q6J("ngIf",e.user&&!e.dialog),a.xp6(5),a.Q6J("ngClass",a.VKq(5,Qe,e.dialog&&3==e.dialog.type)),a.xp6(2),a.Q6J("ngIf",e.dialog),a.xp6(1),a.Q6J("ngIf",!e.dialog||e.dialog&&3!=e.dialog.type)}}function Ne(e,t){1&e&&(a.TgZ(0,"div",99),a._UZ(1,"mat-progress-spinner",100),a.qZA())}let Ue=(()=>{class e{constructor(e,t,i,n,s,o,a){this.commonService=e,this._snackBar=t,this._location=i,this.router=n,this.route=s,this.cdr=o,this.dialogModal=a,this.send_message="",this.is_send_message=!1,this.markForCheck_sub=null,this.show_emoji=!1,this.emoji_l18n={search:y["\u041f\u043e\u0438\u0441\u043a"],notfound:y["\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"],categories:{search:y["\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"],recent:y["\u041d\u0435\u0434\u0430\u0432\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435"],people:y["\u042d\u043c\u043e\u0434\u0437\u0438"],nature:y["\u0416\u0438\u0432\u043e\u0442\u043d\u044b\u0435 \u0438 \u043f\u0440\u0438\u0440\u043e\u0434\u0430"],foods:y["\u0415\u0434\u0430 \u0438 \u043d\u0430\u043f\u0438\u0442\u043a\u0438"],activity:y["\u041c\u0435\u0440\u043e\u043f\u0440\u0438\u044f\u0442\u0438\u044f"],places:y["\u041c\u0435\u0441\u0442\u0430"],objects:y["\u041f\u0440\u0435\u0434\u043c\u0435\u0442\u044b"],symbols:y["\u0421\u0438\u043c\u0432\u043e\u043b\u044b"],flags:y["\u0424\u043b\u0430\u0433\u0438"],custom:y["\u0414\u0440\u0443\u0433\u043e\u0435"]}},this.not_read_checked_mess_count=0,this.route.params.subscribe(e=>{if(e.dialog_id){let t,i=e.dialog_id;this.dialog&&this.dialog.id!=i&&(this.dialog=null),this.commonService.dialogs&&(t=this.commonService.dialogs.filter(e=>e.id==i),t.length&&(this.dialog=t[0],this.scrollToBottom())),this.dialog||this.commonService.createRequest("get","dialogs",{dialog_id:i,offset:Array.isArray(this.commonService.dialogs)?this.commonService.dialogs.length:0}).toPromise().then(e=>{if(e.dialogs){if(this.commonService.addToDialogs(e.dialogs),t=this.commonService.dialogs.filter(e=>e.id==i),!t.length)return this.router.navigate(["/dialogs"]);this.dialog=t[0],this.scrollToBottom()}this.cdr.detectChanges()})}else if(e.user_id){if(e.user_id==this.commonService.user.id)return this.router.navigate(["/dialogs"]);if(this.commonService.dialogs){let t=this.commonService.dialogs.filter(t=>{if(0!=t.type)return;let i;return t.users.forEach(t=>{t.id==e.user_id&&(i=!0)}),i});if(t[0])return this.router.navigate(["/dialogs",t[0].id])}this.commonService.createRequest("get","dialogs",{offset:Array.isArray(this.commonService.dialogs)?this.commonService.dialogs.length:0,user_id:e.user_id}).toPromise().then(t=>{if(t.dialogs.length){this.commonService.addToDialogs(t.dialogs);let i=this.commonService.dialogs.filter(t=>{let i;return t.users.forEach(t=>{t.id==e.user_id&&(i=!0)}),i});i.length&&(this.dialog=i[0])}else t.user&&(this.user=t.user,this.markForCheck_sub=this.commonService.markForCheck_sub.subscribe(()=>{if(this.commonService.dialogs){let e=this.commonService.dialogs.filter(e=>{let t;return e.users.forEach(e=>{e.id==this.user.id&&(t=!0)}),t});e.length&&(this.dialog=e[0],this.markForCheck_sub.unsubscribe(),this.cdr.detectChanges())}}));this.cdr.detectChanges()})}})}ngOnInit(){this.socket_reconnect_sub=this.commonService.socketService.socket_change_status.subscribe(e=>{"reconnect"==e&&this.updateMessages()})}ngOnDestroy(){this.markForCheck_sub&&this.markForCheck_sub.unsubscribe(),this.socket_reconnect_sub&&this.socket_reconnect_sub.unsubscribe()}onWindowFocus(e){this.setMessagesAsRead()}getUserById(e){if(this.dialog)return this.dialog.users.filter(t=>t.id==e)[0]}getAnotherUser(){return this.dialog?this.dialog.users.filter(e=>e.id!=this.commonService.user.id)[0]:this.user?this.user:void 0}goBack(){"/support"==this.commonService.previousUrl&&this.router.navigate(["/dialogs"]),this.commonService.previousUrl&&!this.commonService.previousUrl.match(/\/dialogs\/user\//)?this._location.back():this.commonService.previousUrl_2&&!this.commonService.previousUrl_2.match(/\/dialogs\/user\//)?this.router.navigate([this.commonService.previousUrl_2]):this.router.navigate(["/dialogs"])}scrollToBottom(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(e){}}sendMessage(){if(!this.send_message&&!this.file)return;this.show_emoji=!1,this.is_send_message=!0;let e=new FormData;e.append("file",this.file),e.append("message",this.send_message),this.dialog?e.append("dialog_id",this.dialog.id.toString()):this.user&&e.append("user_id",this.user.id.toString()),this.commonService.createRequest("post","dialogs/message",e).toPromise().then(e=>{if(this.dialog&&e.message)this.commonService.addToDialogs(null,[e.message]);else if(this.user&&e.dialog){this.commonService.addToDialogs([e.dialog]);let t=e.dialog.id,i=this.commonService.dialogs.filter(e=>e.id==t);i.length&&(this.dialog=i[0]),this.markForCheck_sub&&this.markForCheck_sub.unsubscribe()}this.send_message="",this.is_send_message=!1,this.file=null,this.cdr.detectChanges()}).catch(()=>{this.is_send_message=!1,this.cdr.detectChanges()})}onFileSelected(){const e=document.querySelector("#file");e.files[0]&&(e.files[0].size>5e6?(this.file=null,this._snackBar.open(y.max_file_size_error,null,{verticalPosition:"top",duration:3e3})):this.file=e.files[0]),this.cdr.detectChanges()}addEmoji(e){let t=document.getElementById("messageText");if(document.selection)t.focus(),document.selection.createRange().text=e.emoji.native;else if(window.navigator.userAgent.indexOf("Edge")>-1){var i=t.selectionEnd;t.value=t.value.substring(0,s=t.selectionStart)+e.emoji.native+t.value.substring(i,t.value.length);var n=s+e.emoji.native.length;t.focus(),t.setSelectionRange(n,n)}else if(t.selectionStart||"0"==t.selectionStart){var s;i=t.selectionEnd,t.value=t.value.substring(0,s=t.selectionStart)+e.emoji.native+t.value.substring(i,t.value.length)}else t.value+=e.emoji.native;let o=document.createEvent("HTMLEvents");o.initEvent("input",!1,!0),t.dispatchEvent(o)}ngAfterViewChecked(){this.dialog&&this.dialog.messages.length!=this.prev_count_messages&&(this.prev_count_messages=this.dialog.messages.length,this.scrollToBottom()),this.setMessagesAsRead()}setMessagesAsRead(){if(document.hasFocus()&&this.dialog&&this.not_read_checked_mess_count!=this.dialog.messages.length){this.not_read_checked_mess_count=this.dialog.messages.length;let e=this;setTimeout(()=>{let t=!1;if(e.dialog.messages.forEach((i,n)=>{i.not_read&&i.user_id!=e.commonService.user.id&&(e.dialog.messages[n].not_read=!1,t=!0)}),t){if(this.commonService.notifications){let e=this.commonService.notifications.dialogs.indexOf(this.dialog.id);-1!==e&&this.commonService.notifications.dialogs.splice(e,1)}e.commonService.createRequest("post","dialogs/set-read",{dialog_id:e.dialog.id}).toPromise(),e.cdr.destroyed||e.cdr.detectChanges()}},1e3)}}checkScrollOnAndLoad(e){if(!this.dialog)return;let t=this;setTimeout(()=>{let i=document.getElementById("message_"+e);i&&(i.getAttribute("intersector")||(i.setAttribute("intersector","true"),t._setIntersectionObserver(i)))},50)}_setIntersectionObserver(e){if(e){if(!this.intersection_observer){let e=this;this.intersection_observer=new IntersectionObserver(function(t){!0===t[0].isIntersecting&&(e.intersection_observer.unobserve(t[0].target),e.loadMoreMessages())},{threshold:[0]})}this.intersection_observer.disconnect(),this.intersection_observer.observe(e)}}loadMoreMessages(){this.commonService.createRequest("get","messages",{offset:this.dialog.messages.length,dialog_id:this.dialog.id}).toPromise().then(e=>{if(e&&e.length){let t=document.getElementById("messages_content"),i=t.scrollTop,n=t.scrollHeight-t.clientHeight;this.commonService.addToDialogs(null,e),this.prev_count_messages=this.dialog.messages.length,t.scrollTop=i+(t.scrollHeight-t.clientHeight-n)}this.cdr.destroyed||this.cdr.detectChanges()})}updateMessages(){this.dialog&&this.commonService.createRequest("get","messages",{offset:0,dialog_id:this.dialog.id}).toPromise().then(e=>{if(e&&e.length){let t=document.getElementById("messages_content"),i=t.scrollTop,n=t.scrollHeight-t.clientHeight;this.commonService.addToDialogs(null,e),this.prev_count_messages=this.dialog.messages.length,t.scrollTop=i+(t.scrollHeight-t.clientHeight-n)}this.cdr.destroyed||this.cdr.detectChanges()})}createNewContract(){let e;e=this.dialogModal.open(k.a,{data:{type:"new_contract",my_role:0,to_user:this.getAnotherUser(),title:"",desc:"",h:0,m:0,rate:"",rate_cur:""}}),e.afterClosed().subscribe(e=>{})}messageAction(e,t,i){switch(e){case"contract-request":this.commonService.createRequest("post","delegate/contract-request/answer",{id:t.data.contract_request_id,type:i}).toPromise().then(e=>{e.status&&(t.data.status=e.status,this.cdr.detectChanges())})}}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.v),a.Y36(w.ux),a.Y36(n.Ye),a.Y36(o.F0),a.Y36(o.gz),a.Y36(a.sBO),a.Y36(P.uw))},e.\u0275cmp=a.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&a.Gf(I,5),2&e){let e;a.iGM(e=a.CRH())&&(t.myScrollContainer=e.first)}},hostBindings:function(e,t){1&e&&a.NdJ("focus",function(e){return t.onWindowFocus(e)},!1,a.Jf7)},decls:2,vars:2,consts:function(){let e,t,i,n,s,o,c,r,d,g,l,f,m,u,p,h,_,v,x,b,Z,A,q,T,C,M,k,y,w,P,S,O,J,Q,I;return e="Back",t="Conversation with",i="Contract ",n=" Contacting support ",s=" Notifications ",o="Conversation with",c=" System message ",r="Contract created",d="between",g="and",l="In the event of a dispute, the Arbitration will only have access to this conversation. " + "[\ufffd#17\ufffd\ufffd/#17\ufffd|\ufffd#18\ufffd\ufffd/#18\ufffd]" + " " + "[\ufffd#17\ufffd\ufffd/#17\ufffd|\ufffd#18\ufffd\ufffd/#18\ufffd]" + "The customer needs to replenish the contract so that the employee can start implementation. Enjoy your cooperation and productive work!",l=a.Zx4(l),f="The customer has confirmed the terms of the contract and has reserved the payment. ",m="The employee has confirmed the terms of the contract. ",u="The contract is confirmed by the parties and is available for execution. ",p="The contract has been completed, the funds have been transferred to the employee. ",h="The customer has sent a request to cancel the contract.",_="Employee " + "\ufffd#2\ufffd" + "rejected the request" + "\ufffd/#2\ufffd" + ".",v="Employee " + "\ufffd#2\ufffd" + "accepted request" + "\ufffd/#2\ufffd" + " and contract was canceled, the funds were returned to the customer.",x="Employee must respond to the request before ",b=", otherwise the contract will be automatically revoked.",Z="Accept",A="Reject",q="Employee sent a request for the successful completion of the contract.",T="Customer " + "\ufffd#2\ufffd" + "rejected request" + "\ufffd/#2\ufffd" + ".",C="Customer " + "\ufffd#2\ufffd" + " accepted the request" + "\ufffd/#2\ufffd" + ", the contract was completed and employee received payment.",M="Customer must respond to the request before",k=", otherwise the contract will be accepted automatically.",y="Accept",w="Reject",P="Contract was rejected, the funds were returned to the customer. ",S="A dispute is open at the request of one of the parties. " + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd]" + " Describe what the problem is and what solution you agree to. " + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd]" + " We will get acquainted with the contract, time, materials in the conversation and make a partial or full refund / accrual of funds. " + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd]" + "" + "[\ufffd#2\ufffd\ufffd/#2\ufffd|\ufffd#3\ufffd\ufffd/#3\ufffd|\ufffd#4\ufffd\ufffd/#4\ufffd|\ufffd#5\ufffd\ufffd/#5\ufffd|\ufffd#6\ufffd\ufffd/#6\ufffd]" + " Try to find a compromise and resolve the conflict yourself. The arbitration award is final and not subject to change. ",S=a.Zx4(S),O=" Support ",J=" Arbitration ",Q="Enter message",I="Send",[["class","page",4,"ngIf"],["class","page-loader",4,"ngIf"],[1,"page"],[1,"title-block"],[4,"ngIf"],["class","h3",4,"ngIf"],["mat-raised-button","",3,"click"],e,[1,"dialog-open"],["id","messages_content",1,"messages",3,"ngClass"],["scrollMe",""],["class","send-message",4,"ngIf"],["class","h3 contract",4,"ngIf"],[1,"h3"],[1,"hed-title"],t,[3,"routerLink"],[1,"far","fa-circle",3,"ngClass"],[1,"h3","contract"],[2,"margin-right",".5rem","white-space","nowrap"],i,n,s,o,["class","message",3,"id","ngClass",4,"ngFor","ngForOf"],[1,"message",3,"id","ngClass"],[1,"avatar"],["alt","",3,"src","srcset"],[1,"body"],[1,"title"],[1,"username"],[1,"date"],[1,"mess",3,"innerHTML"],["class","attach",4,"ngIf"],[1,"attach"],[3,"href"],[1,"fas","fa-paperclip"],["src","https://maketime.online/img/sup_ava.png","alt",""],[1,"body",2,"min-height","75px"],c,["class","mess system",4,"ngIf"],["class","mess system",3,"innerHTML",4,"ngIf"],[1,"mess","system"],r,d,g,l,f,m,u,p,h,["class","controls",4,"ngIf"],_,[1,"bold"],v,x,b,[1,"controls"],["mat-raised-button","","color","primary",3,"click"],Z,A,q,T,C,M,k,y,w,P,S,[1,"mess","system",3,"innerHTML"],O,["src","https://maketime.online/img/arbitrage_ava.svg","alt",""],J,[1,"send-message"],[2,"flex-grow","1"],["set","emojione","emoji","point_up",3,"darkMode","i18n","showPreview","style","isNative","emojiClick",4,"ngIf"],["action","",3,"submit"],["matInput","","placeholder",Q,"id","messageText","maxlength","2000","matTextareaAutosize","true",3,"ngModelOptions","ngModel","ngModelChange"],["matSuffix","",1,"send-mess-i"],[1,"far","fa-smile","a-icon",3,"click"],[1,"fas","fa-paperclip","a-icon",3,"click"],["class","fas fa-briefcase a-icon",3,"click",4,"ngIf"],["hidden","","type","file","id","file",3,"change"],["fileInput",""],["class","upload-filename",4,"ngIf"],[1,"send-btn-block"],["mat-raised-button","","color","warn",1,"send-btn-raised",3,"disabled","click"],["class","loadingio-spinner-eclipse-isl35v8mq69",4,"ngIf"],["mat-fab","","color","warn",1,"send-btn-fab",3,"disabled","click"],["set","emojione","emoji","point_up",3,"darkMode","i18n","showPreview","isNative","emojiClick"],[1,"fas","fa-briefcase","a-icon",3,"click"],[1,"upload-filename"],[1,"fas","fa-times","a-icon",3,"click"],I,[1,"loadingio-spinner-eclipse-isl35v8mq69"],[1,"ldio-gs8jqvil8t5"],[1,"fas","fa-paper-plane"],[1,"page-loader"],["color","warn","mode","indeterminate"]]},template:function(e,t){1&e&&(a.YNc(0,Ie,12,7,"div",0),a.YNc(1,Ne,2,0,"div",1)),2&e&&(a.Q6J("ngIf",t.dialog||t.user),a.xp6(1),a.Q6J("ngIf",!t.dialog&&!t.user))},directives:[n.O5,S.lW,n.mk,o.yS,n.sg,s._Y,s.JL,s.F,O.KE,J.Nt,J.D7,s.Fj,s.nD,s.JJ,s.On,O.R9,Q.qP,d.Ou],pipes:[g.A],styles:[".h3[_ngcontent-%COMP%]{margin:1rem}.h3[_ngcontent-%COMP%], .title-block[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.title-block[_ngcontent-%COMP%]{align-items:center;border-bottom:1px solid var(--hr-color);padding-bottom:.5rem}.title-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:left}.dialog-open[_ngcontent-%COMP%]{justify-content:space-between}.dialog-open[_ngcontent-%COMP%], .page[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.message[_ngcontent-%COMP%]{display:flex;padding:.5rem 1rem .5rem 0}.avatar[_ngcontent-%COMP%]{width:75px;height:75px;border-radius:15px;margin-right:1rem}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:10px}.body[_ngcontent-%COMP%]{width:100%}.title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.title[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:1rem;display:flex;align-items:center;font-size:14px;font-weight:600;text-align:left}.title[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:rgba(0,0,0,.54);font-size:.8rem}.mess[_ngcontent-%COMP%]{text-align:left;font-size:.9rem;margin-top:.5rem;white-space:pre-wrap;word-break:break-word}.send-message[_ngcontent-%COMP%]{display:flex;border-top:1px solid var(--hr-color);padding-top:1rem;min-height:81px}.send-message[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.send-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:.2rem 2rem;margin-left:2rem}.send-mess-i[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;margin-left:.5rem}.message[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.messages[_ngcontent-%COMP%]{max-height:calc(100vh - 295px);overflow-y:auto}.messages.full[_ngcontent-%COMP%]{max-height:calc(100vh - 305px)}.message.not_read[_ngcontent-%COMP%]{background-color:#74b9ff14}.message[_ngcontent-%COMP%]   .attach[_ngcontent-%COMP%]{font-size:.8rem;text-align:left;margin-top:1rem}@-webkit-keyframes ldio-gs8jqvil8t5{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}@keyframes ldio-gs8jqvil8t5{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}.ldio-gs8jqvil8t5[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;-webkit-animation:ldio-gs8jqvil8t5 1s linear infinite;animation:ldio-gs8jqvil8t5 1s linear infinite;width:76px;height:76px;top:12px;left:12px;border-radius:50%;box-shadow:0 5px 0 0 #f44335;transform-origin:38px 39px}.loadingio-spinner-eclipse-isl35v8mq69[_ngcontent-%COMP%]{width:40px;height:40px;display:inline-block;overflow:hidden;background:none}.ldio-gs8jqvil8t5[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;transform:translateZ(0) scale(.4);-webkit-backface-visibility:hidden;backface-visibility:hidden;transform-origin:0 0}.ldio-gs8jqvil8t5[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:content-box}.fa-times[_ngcontent-%COMP%]{margin-left:.5rem}.upload-filename[_ngcontent-%COMP%]{text-align:left;font-size:.8rem}.send-btn-raised[_ngcontent-%COMP%]{width:150px;height:45px}  .emoji-mart-search{display:none}@media only screen and (max-width:620px){.title-block[_ngcontent-%COMP%]   .h3[_ngcontent-%COMP%]{font-size:1.1rem}}@media only screen and (max-width:500px){.title-block[_ngcontent-%COMP%]   .h3.contract[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}  .dialog-open .mess.system a{font-weight:700}.mess.system[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{text-align:center;margin-top:.5rem}.mess.system[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-right:1rem}.hed-title[_ngcontent-%COMP%]{margin-right:.5rem;white-space:nowrap}.send-btn-fab[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:30px!important;display:none}  .dialog-open .mat-form-field-infix{width:100%}@media only screen and (max-width:570px){.mob[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{display:none}.mob[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:inline}.send-btn-raised[_ngcontent-%COMP%], emoji-mart[_ngcontent-%COMP%]{display:none}.send-btn-fab[_ngcontent-%COMP%]{display:flex!important}.hed-title[_ngcontent-%COMP%]{display:none}}@media(max-width:350px){.send-btn-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:1rem;padding:0}.send-btn-fab[_ngcontent-%COMP%]{font-size:18px!important;width:40px;height:40px}.send-btn-block[_ngcontent-%COMP%]{margin-top:12px}}"]}),e})();const Le=[{path:"",component:M},{path:"user/:user_id",component:Ue},{path:":dialog_id",component:Ue}];let $e=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[o.Bz.forChild(Le)],o.Bz]}),e})();var Be=i(8091);let je=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.u5,n.ez,$e,S.ot,J.c,d.Cq,r.g,Q.bd,Be.m]]}),e})()}}]);