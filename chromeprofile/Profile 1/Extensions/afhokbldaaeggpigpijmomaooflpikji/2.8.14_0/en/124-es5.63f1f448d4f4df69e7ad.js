!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw i}}}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)})}}function o(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(self.webpackChunkangular_newtab=self.webpackChunkangular_newtab||[]).push([[124],{56124:function(n,a,s){"use strict";s.r(a);var u=s(25237),c=s(55401),p=s(57311),f=s(52685),l=(s(66298),s(45240)),d=s(80413),g="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",h=function(e){return e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",e}({}),b=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}({});function m(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,o(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function v(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}var y="firebase-messaging-store",w=null;function k(){return w||(w=(0,l.openDb)("firebase-messaging-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(y)}})),w}function x(e){return S.apply(this,arguments)}function S(){return(S=i(regeneratorRuntime.mark(function e(t){var n,r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=T(t),e.next=3,k();case 3:return r=e.sent,e.next=6,r.transaction(y).objectStore(y).get(n);case 6:if(!(a=e.sent)){e.next=9;break}return e.abrupt("return",a);case 9:return e.next=11,function(){var e=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="databases"in indexedDB,!e.t0){e.next=5;break}return e.next=4,indexedDB.databases();case 4:e.t0=!e.sent.map(function(e){return e.name}).includes("fcm_token_details_db");case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=null,e.next=10,(0,l.openDb)("fcm_token_details_db",5,function(){var e=i(regeneratorRuntime.mark(function e(r){var a,i,o,s,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.oldVersion<2)){e.next=2;break}return e.abrupt("return");case 2:if(r.objectStoreNames.contains("fcm_token_object_Store")){e.next=4;break}return e.abrupt("return");case 4:return i=r.transaction.objectStore("fcm_token_object_Store"),e.next=7,i.index("fcmSenderId").get(t);case 7:return o=e.sent,e.next=10,i.clear();case 10:if(!o){e.next=19;break}if(2!==r.oldVersion){e.next=18;break}if((s=o).auth&&s.p256dh&&s.endpoint){e.next=15;break}return e.abrupt("return");case 15:n={token:s.fcmToken,createTime:null!==(a=s.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:s.auth,p256dh:s.p256dh,endpoint:s.endpoint,swScope:s.swScope,vapidKey:"string"==typeof s.vapidKey?s.vapidKey:m(s.vapidKey)}},e.next=19;break;case 18:3===r.oldVersion?n={token:(u=o).fcmToken,createTime:u.createTime,subscriptionOptions:{auth:m(u.auth),p256dh:m(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:m(u.vapidKey)}}:4===r.oldVersion&&(n={token:(c=o).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:m(c.auth),p256dh:m(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:m(c.vapidKey)}});case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:return e.sent.close(),e.next=13,(0,l.deleteDb)("fcm_token_details_db");case 13:return e.next=15,(0,l.deleteDb)("fcm_vapid_details_db");case 15:return e.next=17,(0,l.deleteDb)("undefined");case 17:return e.abrupt("return",function(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(n)?n:null);case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(t.appConfig.senderId);case 11:if(!(o=e.sent)){e.next=16;break}return e.next=15,I(t,o);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t){return _.apply(this,arguments)}function _(){return(_=i(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=T(t),e.next=3,k();case 3:return a=e.sent.transaction(y,"readwrite"),e.next=6,a.objectStore(y).put(n,r);case 6:return e.next=8,a.complete;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(e){return e.appConfig.appId}var R=new f.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function A(e,t){return O.apply(this,arguments)}function O(){return(O=i(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:return e.t0=e.sent,r={method:"DELETE",headers:e.t0},e.prev=4,e.next=7,fetch("".concat(M(t.appConfig),"/").concat(n),r);case 7:return a=e.sent,e.next=10,a.json();case 10:if(!(i=e.sent).error){e.next=13;break}throw R.create("token-unsubscribe-failed",{errorInfo:i.error.message});case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(4),R.create("token-unsubscribe-failed",{errorInfo:e.t1});case 18:case"end":return e.stop()}},e,null,[[4,15]])}))).apply(this,arguments)}function M(e){var t=e.projectId;return"https://fcmregistrations.googleapis.com/v1/projects/".concat(t,"/registrations")}function C(e){return D.apply(this,arguments)}function D(){return(D=i(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return a=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(a)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(e){var t=e.p256dh,n=e.auth,r=e.endpoint,a=e.vapidKey,i={web:{endpoint:r,auth:n,p256dh:t}};return a!==g&&(i.web.applicationPubKey=a),i}function j(e){return K.apply(this,arguments)}function K(){return(K=i(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t.firebaseDependencies);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,A(t.firebaseDependencies,n.token);case 7:return e.next=9,function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=T(t),e.next=3,k();case 3:return r=e.sent.transaction(y,"readwrite"),e.next=6,r.objectStore(y).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()(t.firebaseDependencies);case 9:return e.next=11,t.swRegistration.pushManager.getSubscription();case 11:return r=e.sent,e.abrupt("return",!r||r.unsubscribe());case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function E(e,t){return N.apply(this,arguments)}function N(){return(N=i(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=i(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:return r=e.sent,a=P(n),i={method:"POST",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch(M(t.appConfig),i);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),R.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw R.create("token-subscribe-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw R.create("token-subscribe-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 2:return e.t0=e.sent,e.t1=Date.now(),e.t2=n,r={token:e.t0,createTime:e.t1,subscriptionOptions:e.t2},e.next=8,I(t,r);case 8:return e.abrupt("return",r.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function F(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function B(e){return R.create("missing-app-config-values",{valueName:e})}L("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),L("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var H=function(){function e(n,r,a){t(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw B("App Configuration Object");if(!e.name)throw B("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var a=r[n];if(!t[a])throw B(a)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(n);this.firebaseDependencies={app:n,appConfig:i,installations:r,analyticsProvider:a}}return r(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();(0,d._registerComponent)(new c.wA("messaging-sw",function(t){var n=new H(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return self.addEventListener("push",function(t){var r;t.waitUntil((r=i(regeneratorRuntime.mark(function t(n,r){var a,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(n)){t.next=3;break}return t.abrupt("return");case 3:if(t.t0=r.deliveryMetricsExportedToBigQueryEnabled,!t.t0){t.next=7;break}return t.next=7,function(){var e=i(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){var n,r,a={};return e.from&&(a.project_number=e.from),e.fcm_message_id&&(a.message_id=e.fcm_message_id),a.instance_id=t,a.message_type=e.notification?h.DISPLAY_NOTIFICATION.toString():h.DATA_MESSAGE.toString(),a.sdk_platform=3..toString(),a.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),!e.collapse_key||(a.collapse_key=e.collapse_key),a.event=1..toString(),!(null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label)||(a.analytics_label=null===(r=e.fcmOptions)||void 0===r?void 0:r.analytics_label),a},e.t1=n,e.next=4,t.firebaseDependencies.installations.getId();case 4:e.t2=e.sent,r=(0,e.t0)(e.t1,e.t2),function(e,t){var n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(t),e.logEvents.push(n)}(t,r);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(r,a);case 7:return t.next=9,F();case 9:if(!function(e){return e.some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")})}(o=t.sent)){t.next=12;break}return t.abrupt("return",function(t,n){n.isFirebaseMessaging=!0,n.messageType=b.PUSH_RECEIVED;var r,a=e(t);try{for(a.s();!(r=a.n()).done;)r.value.postMessage(n)}catch(i){a.e(i)}finally{a.f()}}(o,a));case 12:if(t.t1=a.notification,!t.t1){t.next=16;break}return t.next=16,u=function(e){var t=Object.assign({},e.notification);return t.data={FCM_MSG:e},t}(a),c=void 0,p=void 0,f=void 0,p=u.actions,f=Notification.maxActions,p&&f&&p.length>f&&console.warn("This browser only supports ".concat(f," actions. The remaining actions will not be displayed.")),self.registration.showNotification(null!==(c=u.title)&&void 0!==c?c:"",u);case 16:if(!r||!r.onBackgroundMessageHandler){t.next=19;break}s=function(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var a=t.notification.image;a&&(e.notification.image=a)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(a),"function"==typeof r.onBackgroundMessageHandler?r.onBackgroundMessageHandler(s):r.onBackgroundMessageHandler.next(s);case 19:case"end":return t.stop()}var u,c,p,f},t)})),function(e,t){return r.apply(this,arguments)})(t,n))}),self.addEventListener("pushsubscriptionchange",function(e){var t;e.waitUntil((t=i(regeneratorRuntime.mark(function e(t,n){var r,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.newSubscription){e.next=5;break}return e.next=4,j(n);case 4:return e.abrupt("return",void e.sent);case 5:return e.next=7,x(n.firebaseDependencies);case 7:return o=e.sent,e.next=10,j(n);case 10:return n.vapidKey=null!==(a=null===(r=null==o?void 0:o.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==a?a:g,e.next=13,function(){var e=i(regeneratorRuntime.mark(function e(t){var n,r,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(){var e=i(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:v(n)});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:m(n.getKey("auth")),p256dh:m(n.getKey("p256dh"))},e.next=6,x(t.firebaseDependencies);case 6:if(!(a=e.sent)){e.next=19;break}if((s=r).vapidKey!==(o=a.subscriptionOptions).vapidKey||s.endpoint!==o.endpoint||s.auth!==o.auth||s.p256dh!==o.p256dh){e.next=10;break}return e.abrupt("return",Date.now()>=a.createTime+6048e5?function(){var e=i(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(){var e=i(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:return r=e.sent,a=P(n.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch("".concat(M(t.appConfig),"/").concat(n.token),i);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),R.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=19;break}throw R.create("token-update-failed",{errorInfo:o.error.message});case 19:if(o.token){e.next=21;break}throw R.create("token-update-no-token");case 21:return e.abrupt("return",o.token);case 22:case"end":return e.stop()}},e,null,[[5,14]])}));return function(t,n){return e.apply(this,arguments)}}()(t.firebaseDependencies,n);case 3:return r=e.sent,a=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,I(t.firebaseDependencies,a);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,j(t);case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n){return e.apply(this,arguments)}}()(t,{token:a.token,createTime:Date.now(),subscriptionOptions:r}):a.token);case 10:return e.prev=10,e.next=13,A(t.firebaseDependencies,a.token);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.warn(e.t0);case 18:case 19:return e.abrupt("return",E(t.firebaseDependencies,r));case 20:case"end":return e.stop()}},e,null,[[10,15]])}));return function(t){return e.apply(this,arguments)}}()(n);case 13:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})(e,n))}),self.addEventListener("notificationclick",function(t){var n;t.waitUntil((n=i(regeneratorRuntime.mark(function t(n){var r,a,o,s,u,c,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=null===(a=null===(r=n.notification)||void 0===r?void 0:r.data)||void 0===a?void 0:a.FCM_MSG){t.next=3;break}return t.abrupt("return");case 3:if(!n.action){t.next=5;break}return t.abrupt("return");case 5:if(n.stopImmediatePropagation(),n.notification.close(),s=function(e){var t,n,r,a;return(null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action)||("object"==typeof(a=e.data)&&a&&"google.c.a.c_id"in a?self.location.origin:null)}(o)){t.next=9;break}return t.abrupt("return");case 9:if(u=new URL(s,self.location.href),c=new URL(self.location.origin),u.host===c.host){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,function(){var t=i(regeneratorRuntime.mark(function t(n){var r,a,i,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:r=t.sent,a=e(r),t.prev=4,a.s();case 6:if((i=a.n()).done){t.next=13;break}if(o=i.value,s=new URL(o.url,self.location.href),n.host!==s.host){t.next=11;break}return t.abrupt("return",o);case 11:t.next=6;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),a.e(t.t0);case 18:return t.prev=18,a.f(),t.finish(18);case 21:return t.abrupt("return",null);case 22:case"end":return t.stop()}},t,null,[[4,15,18,21]])}));return function(e){return t.apply(this,arguments)}}()(u);case 14:if(!(p=t.sent)){t.next=21;break}return t.next=18,p.focus();case 18:p=t.sent,t.next=26;break;case 21:return t.next=23,self.clients.openWindow(s);case 23:return p=t.sent,t.next=26,new Promise(function(e){setTimeout(e,3e3)});case 26:return t.abrupt("return",p?(o.messageType=b.NOTIFICATION_CLICKED,o.isFirebaseMessaging=!0,p.postMessage(o)):void 0);case 27:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)})(t))}),n},"PUBLIC"));var U=function(){function e(n,r){t(this,e),this.app=n,this._delegate=r,this.app=n,this._delegate=r}var n,a;return r(e,[{key:"getToken",value:(a=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.LP)(this._delegate,t));case 1:case"end":return e.stop()}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"deleteToken",value:(n=i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.pQ)(this._delegate));case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"onMessage",value:function(e){return(0,p.ps)(this._delegate,e)}},{key:"onBackgroundMessage",value:function(e){return function(e,t){return function(e,t){if(void 0!==self.document)throw R.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,function(){e.onBackgroundMessageHandler=null}}(e=(0,f.m9)(e),t)}(this._delegate,e)}}]),e}(),W={isSupported:function(){return self&&"ServiceWorkerGlobalScope"in self?(0,f.hl)()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"undefined"!=typeof window&&(0,f.hl)()&&(0,f.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}};u.Z.INTERNAL.registerComponent(new c.wA("messaging-compat",function(e){return self&&"ServiceWorkerGlobalScope"in self?new U(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging-sw").getImmediate()):new U(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging").getImmediate())},"PUBLIC").setServiceProps(W)),u.Z.registerVersion("@firebase/messaging-compat","0.1.1")}}])}();