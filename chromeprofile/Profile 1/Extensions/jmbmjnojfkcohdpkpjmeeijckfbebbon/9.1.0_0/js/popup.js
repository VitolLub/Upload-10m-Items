!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){const n="projects";async function o(){return(await browser.storage.local.get(n))[n]}function i(e){const t={};return t[n]=e.map(r),browser.storage.local.set(t)}function r(e){return e.editable&&delete e.editable,e.subItems&&(e.subItems=e.subItems.map(r)),e}function c(e,t){return e.filter(({text:e})=>e===t).length>0}function s(e,t){if(!e||!e.length)return null;let n=1;for(;e.filter(({text:e})=>e===`${t}${n}`).length>0;)n++;return`${t}${n}`}function a(e,t){for(const{id:n,subItems:o}of e){if(n===t)return!0;if(o&&o.filter(({id:e})=>e===t).length>0)return!0}return!1}e.exports={load:o,saveState:i,importProjects:async function(e,t){const n=await o();let r=null;if(t)r=n.filter(({text:e})=>e===t)[0];else{const e=s(n,"group");let t=0;for(;a(n,`${e}_${++t}`););const o=`${e}_${t}`;console.log(o),r=function(e,t){return{id:t,text:e,type:"group",expanded:!1,subItems:[]}}(e,o),n.push(r)}for(const t of e){const{text:e,id:o}=t;if(c(r.subItems,e)&&(t.text=s(r.subItems,e+"_")),!o||a(n,o)){let o=0;for(;a(n,`${e}_${++o}`););t.id=`${e}_${o}`}r.subItems.push(t)}return i(n)},addAction:async function(e,t,n){const r=await o(),[c]=r.filter(({id:t})=>t===e);if(!c)return!1;const[s]=c.subItems.filter(({id:e})=>e===t);if(!s||!s.actions)return!1;const{actions:a}=s;return a.push(n),i(r)},name:n}},function(e,t){const n="customActions";e.exports={load:async function(){return(await browser.storage.local.get(n))[n]},saveState:function(e){const t={};return t[n]=e,browser.storage.local.set(t)},name:n,predefined:[{data:{type:"timer",inputs:["1000","Please enter the time in milliseconds"]},info:{description:"Stops workflow of project for mentioned period in milliseconds then continue with it."},text:"Timer"},{data:{type:"update",inputs:["this event will let the script wait for page update",""]},info:{description:"This action will let the execution flow wait for page update/load and then continue with it."},text:"Update"},{data:{type:"bg-function",inputs:["<$function=removeCookie>\n<$attr=.*>","use regular expressions to filter domains"]},info:{description:"Clear browser cookie(s) for domains matching corresponding regular expression in `<$attr=.*>`, ex.: `<$attr=google.com>`"},text:"Clear cookies"},{data:{type:"bg-function",inputs:['<$function=saveToClipboard>\n<$attr={"name": "value"}>',"Write to clipboard Object to access data later. Use Json in the attr"]},info:{description:"Write to clipboard Object to access data later. Use Json in the attr."},text:"Clipboard"}]}},function(e,t){var n=n||[];n.push(["_setAccount","UA-32260034-1"]),n.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ssl.google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),e.exports={_gaq:n}},function(e,t){e.exports={Notification:class{constructor(e){this.notificationElement=document.querySelector(e)}show(e,t){this.notificationElement.textContent=e,this.notificationElement.classList.remove("error"),t&&this.notificationElement.classList.add("error")}clean(){this.show("")}error(e){this.show(e,!0)}},NO_PROJ_SELECTED:"Please select project",NO_PROJ_GROUP_SELECTED:"Please select Group or Project",NO_ACTION_SELECTED:"Please select action",SELECT_PROJ_NOT_GROUP:"Please select project (not group)",CHANGES_SAVED:"Changes has been saved",NO_GROUP_ROOT_SELECTED:"Please select group or 'Root'",NO_IMPORT_DATA:"Please specify the import data",NO_PROJ_GROUP_TYPE:"Type should either be of type 'group' or 'project'",PROJECT_IMPORTED:"The group or project is imported",NO_FUNCTION_NAME:"Please specify 'name' of the function",NO_SELECTED_FUNCTION:"Please select a function",CHANGES_SAVED:"Changes has been saved",NAME_EXISTS_GROUP:"The group with choosen name already exists",NAME_EXISTS_PROJECT:"The group already has project with current name",PROJECT_EDIT:"Please click 'save' below projects list to finish renaming"}},,function(e,t,n){const o=n(6),i=["inject","cs-inject","bg-inject","bg-function","check","click","click-update","update","redirect","copy","copy-html","pause"],r=["update","timer","pause"],c=["timer"],s=["change","check","click","click-update","copy","copy-html"];e.exports=class{constructor(e){const{type:t,inputs:n,text:o,info:i={}}=e,[r,c]=n;this.typeInput=document.querySelector(t),this.mainInput=document.querySelector(r),this.secondaryInput=document.querySelector(c),this.functionNameInput=document.querySelector(o),this.functionDescriptionInput=document.querySelector(i.description),this.functionLinkInput=document.querySelector(i.link),this.tooltip=null,this.typeInput.addEventListener("change",this.onTypeChange.bind(this)),this._populateTypes(),this.onTypeChange()}get _type(){return this.typeInput.value}set _type(e){this.typeInput.value=e,this.onTypeChange()}get _main(){return this.mainInput.value}set _main(e){this.mainInput.value=e}get _secondary(){return this.secondaryInput.value}set _secondary(e){this.secondaryInput.value=e}get _functionName(){return this.functionNameInput.value}set _functionName(e){this.functionNameInput.value=e}get _functionDescription(){return this.functionDescriptionInput.value}set _functionDescription(e){this.functionDescriptionInput.value=e}get _functionLink(){return this.functionLinkInput.value}set _functionLink(e){this.functionLinkInput.value=e}isReverse(){return c.includes(this._type)}isFunction(){return this.functionNameInput}isHighlight(e){return s.includes(e)}_populateTypes(){for(const{name:e}of o){const t=document.createElement("option");t.value=e,t.textContent=e,this.typeInput.appendChild(t)}}setTooltip(e){this.tooltip=document.querySelector(e),this.setTooltipInfo()}setTooltipInfo(){const{link:e,description:t,name:n}=o.filter(({name:e})=>e===this._type)[0],i=n,r=t;this.tooltip.setData({heading:i,text:r,link:e,linkText:"Learn more"})}reset(){this.typeInput.selectedIndex=0,this._main="",this._secondary=""}getItem(){const e=[this._main,this._secondary],t={type:this._type,inputs:this.isReverse()?e.reverse():e};return this.isFunction()?{data:t,text:this._functionName,info:{description:this._functionDescription,link:this._functionLink}}:t}setItem(e){let t,n,o,i="";this.isFunction()&&e.data?(({type:n,inputs:i}=e.data),({info:o={},text:t}=e)):({type:n,inputs:i}=e),n?this._type=n:this.typeInput.selectedIndex=0,i?this.isReverse()?(this._main=i[1]||"",this._secondary=i[0]||""):(this._main=i[0]||"",this._secondary=i[1]||""):(this._main="",this._secondary=""),t&&(this._functionName=t),o&&o.description&&(this._functionDescription=o.description),o&&o.link&&(this._functionLink=o.link)}onTypeChange(){this.mainInput.disabled=!1,this.secondaryInput.disabled=!1;const e=this._type;this.tooltip&&this.setTooltipInfo(),i.includes(e)&&(this.secondaryInput.disabled=!0),r.includes(e)&&(this.mainInput.disabled=!0)}}},function(e,t){const n="https://chrome-automation.com",o=[{name:"inject",description:"Injects script into web page and iframes.",link:n+"/inject"},{name:"cs-inject",description:"Injects javascript code into the content script.",link:n+"/inject-cs"},{name:"bg-inject",description:"Inject script into backroung page of the extension.",link:n+"/bg-inject"},{name:"bg-function",description:"Predefined scripts that are executed in the context of the background page.",link:n+"/bg-function"},{name:"change",description:"Changes value of HTML inputs.",link:n+"/change"},{name:"check",description:"Checks/unchecks checkboxes.",link:n+"/check"},{name:"click",description:"Triggers click event.",link:n+"/click"},{name:"click-update",description:"Triggers click event and waits for the page to update to proceed with the rest of the actions.",link:n+"/click-update"},{name:"update",description:"Waits for the browser update and then continue with workflow.",link:n+"/update"},{name:"timer",description:"Timer action is used to stop workflow of project for mentioned period in milliseconds then continue with it.",link:n+"/timer"},{name:"redirect",description:"Redirects the page to mentioned URL and wait for browser update to continue with project workflow.",link:n+"/redirect"},{name:"copy",description:"Copy content of the element into clipboard['copy'] object, which can be used later during the execution.",link:n+"/copy"},{name:"copy-html",description:"Copy HTML content of the element into clipboard['copy'] object, which can be used later during the execution.",link:n+"/copy-html"},{name:"pause",description:"Pause project workflow, waits for 'resume' button to be clicked in extension popup.",link:n+"/pause"}];e.exports=o},,,,,,,,function(e,t,n){const{_gaq:o}=n(2);function i(e){o.push(["_trackEvent",e.target.id,"clicked"])}n(15),function(){for(var e=document.querySelectorAll("cba-button"),t=0;t<e.length;t++)e[t].addEventListener("click",i)}();new URL(window.location).searchParams.has("options")&&document.body.classList.add("options")},function(e,t,n){const o=n(1),{NO_PROJ_SELECTED:i,NO_PROJ_GROUP_SELECTED:r,NO_ACTION_SELECTED:c,SELECT_PROJ_NOT_GROUP:s,CHANGES_SAVED:a,NAME_EXISTS_GROUP:u,NAME_EXISTS_PROJECT:l,Notification:d,PROJECT_EDIT:p}=n(3),f=n(0),m=n(16),h=n(5),g=document.querySelector("#projects cba-list"),y=document.querySelector("#functions"),w=document.querySelector("#actions"),b=document.querySelector("#playButtonTooltip"),I=new h({type:"#actionEvType",inputs:["#actionData","#actionNewValue"]});I.setTooltip("#actionInfo");const _=chrome.extension.getBackgroundPage().cba,k=new d("#notification");let S=null;async function j(){g.items=await f.load(),_.lastSelectedProjectId&&g.selectRow(_.lastSelectedProjectId);const{type:e,actions:t}=g.getSelectedItem();E("project"===e?t:[]),O(!0)}function E(e){w.items=e;const t=g.getSelectedItem().id;_.lastSelectedActionId&&_.lastSelectedProjectId===t?w.selectRow(_.lastSelectedActionId,!1):T(),P()}async function v(){await m.set("hidePowerfulActionWarning",!0),b.disable()}async function x(){const{id:e}=await g.getSelectedItem();1!=await m.get("hidePowerfulActionWarning")&&function(e,t){const n=g.getItem(e);return!("project"!==n.type||!n.actions)&&n.actions.filter(e=>t.indexOf(e.type)>=0).length>0}(e,["bg-inject","cs-inject"])?b.enable():b.disable()}function T(){const[e]=w.items;e&&w.selectRow(e.id)}async function P(){const e=w.getSelectedItem();if(!e)return null;_.lastSelectedActionId=e.id,I.setItem(e)}function R(){const e=document.querySelector("#recordButton");_.allowRec?e.textContent="recording...":e.textContent="rec"}function O(e){if(function(){const e=document.querySelector("#playButton");_.paused?e.textContent="resume":e.textContent="play"}(),_.allowPlay||_.paused){if(g.selectRow(_.playingProjectId),_.playingActionIndex>=0){const{id:e}=w.items[_.playingActionIndex];w.selectRow(e)}setTimeout(O,100)}else e||T()}function C(){return f.saveState(g.items)}async function N(e){if(S&&"saveProject"!==e)return k.error(p),void g.selectRow(g.getSelectedItem().id);switch(e){case"addGroup":{const e=A(g.items,"group");g.addRow({text:"group"+e,type:"group",expanded:!1,subItems:[{text:"project",type:"project",actions:[]}]}),C();break}case"addProject":{const e=g.getSelectedItem();if(!e)return k.error(r);const{type:t,id:n}=e,o="group"==t?e:g.getParentItem(n),i=A(o.subItems,"project");g.addRow({text:"project"+i,type:"project",actions:[]},o.id),C();break}case"removeProject":{const e=g.getSelectedItem();if(!e)return k.error(r);const{id:t}=e;g.deleteRow(t),C();break}case"renameProject":{const e=g.getSelectedItem();if(!e)return k.error(r);g.setEditable(e.id,!0),S=e,document.querySelector("#projects").classList.add("rename");break}case"saveProject":{if(!S)return location.reload(),void document.querySelector("#projects").classList.remove("rename");const{text:e,type:t,id:n}=S,o=g._getRowContent(n);if("project"===t){if(L(g.getParentItem(n).subItems,o)&&e!=o)return g.selectRow(n),k.error(l)}else if(L(g.items,o)&&e!=o)return g.selectRow(n),k.error(u);g.saveEditables(),await C(),k.clean(),document.querySelector("#projects").classList.remove("rename"),S=null;break}case"addAction":{const e=g.getSelectedItem();if(!e)return k.error(i);const{id:t}=w.getSelectedItem(),{type:n}=e;if("project"!==n)return k.error(s);{const n="",o=["",""];if(w.addRow({type:n,inputs:o},t),t)w.selectNextRow();else{const e=w.items[w.items.length-1];w.selectRow(e.id)}e.actions=w.items,g.updateRow(e,e.id),C()}break}case"deleteAction":{const e=g.getSelectedItem(),t=w.getSelectedItem();if(!t)return k.error(c);if(!e)return k.error(i);const{type:n}=e;if("project"!==n)return k.error(s);w.deleteRow(t.id),e.actions=w.items,g.updateRow(e,e.id),C();break}case"saveAction":{const e=g.getSelectedItem(),t=w.getSelectedItem();if(!t)return k.error(c);if(!e)return k.error(i);const{type:n}=e;"project"===n&&(w.updateRow(I.getItem(),t.id),e.actions=w.items,g.updateRow(e,e.id),await C(),k.show(a));break}case"drop":{const e=g.getSelectedItem();if(!e)return k.error(i);const{type:t}=e;if("project"!==t)return k.error(s);e.actions=w.items,g.updateRow(e,e.id),C();break}case"record":{const e=g.getSelectedItem();if(!e)return k.error(i);const{type:t,id:n}=e;if("project"!==t)return k.error(s);{const e=g._findItem("id",n,!0);_.recordButtonClick(e.id,n)}R();break}case"stop":k.clean(),_.stopButtonClick(),R();break;case"play":{const e=g.getSelectedItem();if(!e)return k.error(i);const{type:t,actions:n,id:o}=e;if("project"!==t||!n)return k.error(s);{const e=document.querySelector("#repeat").value;_.playButtonClick(n,e,o),O()}break}}}function L(e,t){return e.filter(e=>e.text===t).length>0}function A(e,t){if(!e||!e.length)return 1;let n=1;for(;e.filter(({text:e})=>e===`${t}${n}`).length>0;)n++;return n}async function D(e,[t],n=!0){if(I.isHighlight(e)){const e=n?"highlight":"unHighlight",o=t,[i]=await browser.tabs.query({active:!0});i.url.startsWith("http")&&await browser.tabs.sendMessage(i.id,{action:e,selector:o})}}var q;j(),async function(){y.items=await o.load()}(),R(),async function(){const e=v;b.setData({heading:"bg-inject & cs-inject",text:"Current project contains some powerful action types, before running please ensure you trust those.",link:"https://chrome-automation.com/powerful-actions",linkText:"Learn more",actionText:"Hide message",action:e}),await x()}(),g.addEventListener("expand",C),g.addEventListener("keydown",({key:e})=>{"Enter"===e&&N("saveProject")}),g.addEventListener("select",(async function(){const{type:e,actions:t,id:n}=g.getSelectedItem();_.lastSelectedProjectId=n,I.reset(),await x(),E("project"===e?t:[])})),w.addEventListener("select",P),w.addEventListener("rowmouseover",({detail:e})=>{const{type:t,inputs:n}=w.getItem(e.rowId);D(t,n)}),w.addEventListener("rowmouseout",({detail:e})=>{const{type:t,inputs:n}=w.getItem(e.rowId);D(t,n,!1)}),w.addEventListener("dragndrop",()=>{N("drop")}),q=N,document.body.addEventListener("click",({target:e})=>{const t=e.dataset.action;t&&q(t)}),browser.storage.onChanged.addListener(e=>{e[f.name]&&j()})},function(e,t){async function n(){return(await browser.storage.local.get("prefs")).prefs}!async function(){let e=await n();if(!e)e={hidePowerfulActionWarning:!1},browser.storage.local.set({prefs:e})}(),e.exports={load:n,get:async function(e){const t=await n();return!(!t||!t[e])&&t[e]},set:async function(e,t){const o=await n();return!(!o||!(e in o))&&(o[e]=t,browser.storage.local.set({prefs:o}))}}}]);