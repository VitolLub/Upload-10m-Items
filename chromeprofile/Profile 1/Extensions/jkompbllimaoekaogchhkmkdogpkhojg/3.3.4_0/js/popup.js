(function(){var e=function(){$(".version").text("Version "+chrome.app.getDetails().version),"true"!==localStorage.discountsSeen&&$(".dot").removeClass("hidden"),$(".toggle-button").click((function(){this.dataset.state="on"===this.dataset.state?"off":"on"})),$("#toggle-extension").click((function(){chrome.runtime.sendMessage({cmd:"app.set_state",data:{state:"on"===this.dataset.state}})})),$(".tab").click((function(e){e.preventDefault();var t=$(this);$(".tab.active").removeClass("active"),t.addClass("active");var s=this.dataset.target;"promo"===s&&($(".dot").addClass("hidden"),chrome.runtime.sendMessage({cmd:"discounts.seen"})),$(".tab-content").removeClass("active"),$(".tab-content[data-tab="+s+"]").addClass("active")})),$("input[type=checkbox]").change((function(){var e=!!this.checked,t={};t[this.id]=e,chrome.runtime.sendMessage({cmd:"settings.set",data:t})})),$(".ga-link").click((function(){var e=this.dataset.link;chrome.runtime.sendMessage({cmd:"cpa.sendEvent",data:["click",e]})}))};return{init:function(){chrome.runtime.sendMessage({cmd:"app.get_state",data:{}},(function(e){$("#toggle-extension")[0].dataset.state=e.state?"on":"off",$("#showExtInfo").prop("checked",e.settings.showExtInfo),$("#showPopupByKeypress").prop("checked",e.settings.showPopupByKeypress),$("#showTopRight").prop("checked",e.settings.showTopRight),$("#hideSubrank").prop("checked",e.settings.hideSubrank),$("#hidePremium").prop("checked",e.settings.hidePremium)})),e()}}})().init();